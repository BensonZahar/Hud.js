import{w as f}from"./dom.js";import{o as b,c as T,a,n as d,d as S,_ as O,r as H,i as g,b as p,f as _}from"./index.js";const h={VERTICAL:0,HORIZONTAL:1,BOTH:2},I={DEFAULT:0,ROUNDED:1,THIN:2,THIN_WITH_BG:3,THIN_VIOLET:4,THIN_WHITE:5,THIN_YELLOW:6,THIN_GREY:7,THIN_BLACK:8,WHITE_BLACK_LINES:9};function E(e,t,o,l,i,s){return b(),T("div",{class:d(["scrollable-container-thumb",`scrollable-container-thumb_type_${o.type}`,s.classes]),style:S(s.style),onMousedown:t[0]||(t[0]=(...r)=>s.onMouseDown&&s.onMouseDown(...r)),onTouchstart:t[1]||(t[1]=(...r)=>s.onTouchStart&&s.onTouchStart(...r))},t[2]||(t[2]=[a("div",{class:"scrollable-container-thumb-shadow"},null,-1),a("div",{class:"scrollable-container-thumb-decoration"},[a("span"),a("hr"),a("span")],-1)]),38)}const L={props:{height:{type:Number,default:0},offset:{type:Number,default:0},orientation:{type:String,default:"vertical"},type:{type:Number,default:I.DEFAULT},isSquare:{type:Boolean,default:!1}},computed:{style(){return this.orientation==="horizontal"?{width:`${this.height}%`,left:`${this.offset}%`}:{height:`${this.height}%`,top:`${this.offset}%`}},classes(){return{"scrollable-container-thumb_vertical":this.orientation==="vertical","scrollable-container-thumb_horizontal":this.orientation==="horizontal","scrollable-container-thumb_square":this.isSquare}}},data:()=>({isMouseDown:!1,lastTouchPos:null}),mounted(){document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("touchmove",this.onTouchMove),document.addEventListener("touchend",this.onTouchEnd),document.addEventListener("touchcancel",this.onTouchEnd)},unmounted(){document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd),document.removeEventListener("touchcancel",this.onTouchEnd)},methods:{onMouseUp(){this.isMouseDown=!1},onMouseDown(e){this.isMouseDown=!0},onMouseMove(e){if(!this.isMouseDown)return;const t=this.orientation==="horizontal"?e.movementX:e.movementY;this.$emit("move",t)},onTouchStart(e){e.touches.length===1&&(this.isMouseDown=!0,this.lastTouchPos=this.orientation==="horizontal"?e.touches[0].clientX:e.touches[0].clientY)},onTouchMove(e){if(!this.isMouseDown||e.touches.length!==1)return;e.preventDefault();const t=this.orientation==="horizontal"?e.touches[0].clientX:e.touches[0].clientY,o=t-this.lastTouchPos;this.lastTouchPos=t,this.$emit("move",o)},onTouchEnd(){this.isMouseDown=!1,this.lastTouchPos=null}}},N=O(L,[["render",E],["__scopeId","data-v-d8245745"]]);function Y(e,t,o,l,i,s){const r=H("Thumb");return b(),T("div",{class:d(["scrollable-container",`scrollable-container_type_${o.type}`,s.classes])},[a("div",{class:d(["scrollable-container__container",{"scrollable-container__container_vertical-hidden":i.verticalIsHidden}]),ref:"container",onScroll:t[0]||(t[0]=(...n)=>s.onScroll&&s.onScroll(...n)),style:S({maskImage:`linear-gradient(${s.maskAngle}, rgba(255, 255, 255, ${i.maskOpacity.start}) 0%, rgba(255, 255, 255, 1) 50%, rgba(255, 255, 255, ${i.maskOpacity.end}) 100%)`})},[g(e.$slots,"default",{},void 0,!0)],38),o.orientation===i.ORIENTATION_TYPES.BOTH||o.orientation===i.ORIENTATION_TYPES.VERTICAL?(b(),T("div",{key:0,class:d(["scrollable-container__rail scrollable-container__rail_y",{"scrollable-container__rail_hidden":i.verticalIsHidden}]),style:S(s.calcStylesY),ref:"railY"},[t[3]||(t[3]=a("div",{class:"scrollable-container__rail-background"},null,-1)),p(r,{ref:"thumbY",height:i.thumbHeight*100,offset:i.thumbTop*100,orientation:"vertical",type:o.type,isSquare:o.isSquare,onMove:t[1]||(t[1]=n=>s.onThumbMove(!1,n))},null,8,["height","offset","type","isSquare"])],6)):_("",!0),o.orientation===i.ORIENTATION_TYPES.BOTH||o.orientation===i.ORIENTATION_TYPES.HORIZONTAL?(b(),T("div",{key:1,class:d(["scrollable-container__rail scrollable-container__rail_x",{"scrollable-container__rail_hidden":i.horizontalIsHidden}]),style:S(s.calcStylesX),ref:"railX"},[t[4]||(t[4]=a("div",{class:"scrollable-container__rail-background"},null,-1)),p(r,{ref:"thumbX",height:i.thumbWidth*100,offset:i.thumbLeft*100,orientation:"horizontal",type:o.type,isSquare:o.isSquare,onMove:t[2]||(t[2]=n=>s.onThumbMove(!0,n))},null,8,["height","offset","type","isSquare"])],6)):_("",!0)],2)}let m=null;const y=.2,M=1,w={props:{orientation:{type:Number,default:h.VERTICAL},wheelScroll:{type:Boolean,default:!1},wheelScrollIsSmooth:{type:Boolean,default:!1},requiredHorizontalScroll:{type:Number,default:0},requiredVerticalScroll:{type:Number,default:0},alwaysVisible:{type:Boolean,default:!1},useScrollToBottom:{type:Boolean,default:!1},type:{type:Number,default:I.DEFAULT},isSquare:{type:Boolean,default:!1},initialThumbSize:{type:Number,default:0},useMask:{type:Boolean,default:!1},railYScale:{type:Number,default:1},railYOffsetXVh:{type:Number,default:0},railYOffsetYVh:{type:Number,default:0},railXOffsetXVh:{type:Number,default:0},railXOffsetYVh:{type:Number,default:0},railXScale:{type:Number,default:1}},components:{Thumb:N},computed:{classes(){return{"scrollable-container_vertical":this.orientation===h.VERTICAL,"scrollable-container_horizontal":this.orientation===h.HORIZONTAL,"scrollable-container_horizontal-is-hidden":this.horizontalIsHidden,"scrollable-container_vertical-is-hidden":this.verticalIsHidden&&!this.alwaysVisible}},calcStylesX(){const e={};return this.railXScale!==1&&(e.transform=(e.transform||"")+` scaleX(${this.railXScale})`),this.railXOffsetXVh&&(e.right=`${this.railXOffsetXVh}vh`),this.railXOffsetYVh&&(e.bottom=`${this.railXOffsetYVh}vh`),e},calcStylesY(){const e={};return this.railYScale!==1&&(e.transform=(e.transform||"")+` scaleY(${this.railYScale})`),this.railYOffsetXVh&&(e.right=`${this.railYOffsetXVh}vh`),this.railYOffsetYVh&&(e.bottom=`${this.railYOffsetYVh}vh`),e},maskAngle(){return this.orientation===h.HORIZONTAL?"260deg":"0"}},data(){return{ORIENTATION_TYPES:h,observer:null,thumbTop:0,thumbHeight:0,verticalIsHidden:!0,thumbLeft:0,thumbWidth:0,horizontalIsHidden:!0,maskOpacity:{start:1,end:1}}},mounted(){this.$el.addEventListener("wheel",this.onWheel),f(()=>{this.onScroll(!1,!0),this.initMutationObserver()})},unmounted(){this.removeMutationObserver(),this.$el.removeEventListener("wheel",this.onWheel)},methods:{initMutationObserver(){const e=this.$refs.container;e&&(m=new MutationObserver(this.onMutation),m.observe(e,{childList:!0,subtree:!0}))},removeMutationObserver(){m&&m.disconnect()},onMutation(){f(()=>{this.onScroll()})},onScroll(e=!1,t=!1){const o=this.$refs.container;if(!o)return;const l=this.getMaxScroll(!0),i=this.getMaxScroll();!e&&this.useScrollToBottom?o.scrollTop=i:(o.scrollLeft=Math.min(o.scrollLeft,l),o.scrollTop=Math.min(o.scrollTop,i)),this.updateThumb(t),this.updateMaskOpacity(),this.$emit("contentScroll",{scrollableWrapper:o})},updateVerticalThumb(e=!1){f(()=>{const t=this.$refs.container;if(!t)return;const o=5;if(Math.abs(t.scrollHeight-t.offsetHeight)<=o){this.thumbHeight=0,this.thumbTop=0,this.verticalIsHidden=!0;return}this.thumbHeight=e&&this.initialThumbSize?this.initialThumbSize:t.offsetHeight/t.scrollHeight,this.thumbTop=t.scrollTop/t.scrollHeight,this.verticalIsHidden=!1})},updateHorizontalThumb(e=!1){f(()=>{const t=this.$refs.container;if(!t)return;const o=5;if(Math.abs(t.scrollWidth-t.offsetWidth)<=o){this.thumbWidth=0,this.thumbLeft=0,this.horizontalIsHidden=!0;return}this.thumbWidth=e&&this.initialThumbSize?this.initialThumbSize:t.offsetWidth/t.scrollWidth,this.thumbLeft=t.scrollLeft/t.scrollWidth,this.horizontalIsHidden=!1})},updateThumb(e=!1){this.updateVerticalThumb(e),this.updateHorizontalThumb(e)},updateMaskOpacity(){if(!this.useMask){this.setMaskOpacity(1,1);return}f(()=>{const e=this.$refs.container;if(!e)return;const t=this.orientation===h.HORIZONTAL,o=5,l=t?e.scrollWidth:e.scrollHeight,i=t?e.offsetWidth:e.offsetHeight,s=t?e.scrollLeft:e.scrollTop;if(Math.abs(l-i)<=o){this.setMaskOpacity(1,1);return}this.setMaskOpacity(Math.max(y,s/(l-i)*M))})},setMaskOpacity(e,t=-1){this.maskOpacity.start=e,this.maskOpacity.end=t>=0?t:M+y-e},getMaxScroll(e){const t=this.$refs.container;return e?t.scrollWidth-t.offsetWidth:t.scrollHeight-t.offsetHeight},onThumbMove(e,t){const{container:o,railY:l,railX:i,thumbY:s,thumbX:r}=this.$refs,n=e?t/(i.offsetWidth-r.$el.offsetWidth):t/(l.offsetHeight-s.$el.offsetHeight),c=e?"scrollLeft":"scrollTop",u=this.getMaxScroll(e);o[c]+=u*n,this.onScroll(!0)},onWheel(e){!this.wheelScroll||this.thumbHeight||(this.wheelScrollIsSmooth?this.handleSmoothWheelScroll(e):this.handleWheelScroll(e))},handleWheelScroll(e){const o=this.$refs.container;if(!o)return;const l=this.getMaxScroll(!0);e.deltaY>0?o.scrollLeft+=l*.05:o.scrollLeft-=l*.05,this.onScroll()},handleSmoothWheelScroll(e){const t=this.$refs.container;if(!t)return;const o=1e3,l=.25;let i,s,r=!1;const n=c=>{i===void 0&&(i=c);const u=c-i;if(s!==c){const v=e.deltaY>0?Math.min(l*u,e.deltaY):Math.max(l*-u,e.deltaY);t.scrollLeft+=v,v===e.deltaY&&(r=!0),this.onScroll()}u<=o&&(s=c,r||window.requestAnimationFrame(n))};window.requestAnimationFrame(n)}},watch:{requiredHorizontalScroll(e){!this.$refs.container||e<0||e===null||(this.$refs.container.scrollLeft=e,this.onScroll())},requiredVerticalScroll(e){!this.$refs.container||e<0||e===null||(this.$refs.container.scrollTop=e,this.onScroll())},verticalIsHidden(e){this.$emit("verticalScrollVisibilityChange",!e)},horizontalIsHidden(e){this.$emit("horizontalScrollVisibilityChange",!e)}}},A=O(w,[["render",Y],["__scopeId","data-v-baca0f69"]]);export{A as S,I as T};
